# 抽象工厂模式

抽象工厂模式，其实还蛮简单的，就是对工厂方法模式的一个简单的改进。

在工厂方法模式当中，一个工厂类仅仅对应着一个产品类，使用工厂类生产
产品时，无需 switch 和 if 之类的判断语句，增加新产品时，只需要增加
一个产品类，和其对应的抽象类即可。

到了抽象工厂模式，一个工厂并不只是仅仅生产一个特定的产品，而是生产一系列
相同品牌的产品。这时的工厂和我们现实世界中的工厂的概念是很相似的。

举个例子，把手机分成 千元机、终端机、高端机和奢侈机 四种，一个合格
的手机生产工厂，应该可以生产这四种手机，因此抽象出一个抽象生产手机工厂。

小米是一家合格的手机工厂，继承抽象手机生产工厂，生产自己的 千元机、终端机、高端机和奢侈机；<br>
华为是一家合格的手机工厂，继承抽象手机生产工厂，生产自己的 千元机、终端机、高端机和奢侈机；<br>
魅族是一家合格的手机工厂，继承抽象手机生产工厂，生产自己的 千元机、终端机、高端机和奢侈机；<br>

<div align="center"> 。。。 </div>

在客户端中，指定一个品牌的工厂，就可生产其下的各种价位的手机。

##### **开放封闭情况**
当需要增加一个品牌的工厂时：
  - <span color="green" >增加工厂类</span>
  - <span color="green" >客户端调用代码修改</span>

当需要增加一种价位的手机时：
  - <span color="green" >增加这个价位手机的具体类</span>
  - <span color="red" >修改抽像工厂类，</span>
  - <span color="red" >修改各大工厂类</span>
  - <span color="green">客户端调用代码修改</span>

可以看到，面对不同的需求时，抽象工厂方法有着截然不同的表现，按照
网上的文邹邹的说法，就是：

> **“开闭原则”的倾斜性**<br>
“开闭原则”要求系统对扩展开放，对修改封闭，通过扩展达到增强其功能的目的。对于涉及到多个产品族与多个产品等级结构的系统，其功能增强包括两方面：<br>
**增加产品族**：对于增加新的产品族，工厂方法模式很好的支持了“开闭原则”，对于新增加的产品族，只需要对应增加一个新的具体工厂即可，对已有代码无须做任何修改。<br>**增加新的产品等级结构**：对于增加新的产品等级结构，需要修改所有的工厂角色，包括抽象工厂类，在所有的工厂类中都需要增加生产新产品的方法，不能很好地支持“开闭原则”。
抽象工厂模式的这种性质称为“开闭原则”的倾斜性，抽象工厂模式以一种倾斜的方式支持增加新的产品，它为新产品族的增加提供方便，但不能为新的产品等级结构的增加提供这样的方便。

因此，绝对没有完美的设计模式，任何设计模式都有其自身的实用场景，
只能根据具体的业务来选择。

![](http://owx8bh6es.bkt.clouddn.com/2017-10-03%2020-04-14%20%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png)